---
title: 'MSDS 597 Assignment #7'
author: "Zach Wilson"
date: "November 7, 2016"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

As usual, the first step in this process is to load all the necessary libraries.

```{r, echo = TRUE, include = TRUE} 
# load necessary libraries
library(tidyverse)
library(stringr)
library(broom)
library(viridis)
library(choroplethr)
```

Once that is complete, the maternal mortality data is read in.  Prior to this point the file hw_07_cleanup.R was run to clean up and format the data correctly. This clean up included removing the spaces used to indicate where commas would have been in the numbers, creating new lower and uper maternal mortality bound colums from the information in square brackets in the original maternal mortality data, converting the relevant colums from characters to numbers, and creating new rows for the skilled health percentage rows that gave year ranges.  The gross national income data was not in a tidy format and so once the data was cleaned up a bit a gather was run to create a data frame with only three columns, one of which is year.  The end result of this process is a csv file that is now loaded to provide a clean set of data to plot and analyze

```{r, echo = TRUE, include = TRUE} 
# read in and tidy up the maternal mortality data
mm_gni_clean <- read_csv("../data/mm_gni_clean.csv")
```

The first plot created shows the relationship between income and maternal mortality:

```{r, echo = TRUE, include = TRUE} 
# plot maternal mortality vs income
mm_gni_clean %>%
  ggplot(aes(x = gross_nat_income, y = maternal_mortality)) + 
  geom_point(show.legend = TRUE) + 
  ggtitle("Maternal Mortality vs Gross National Income") +
  labs(x = "Per Capita Gross National Income ($)", 
       y = "Maternal Mortality Ratio (per 100,000 live births)") +
  scale_color_viridis(discrete = TRUE) +
  theme_bw()
```

The next plot shows the relationship between gross national income and maternal mortality:

```{r, echo = TRUE, include = TRUE} 
# plot maternal mortality vs income
mm_gni_clean %>%
  ggplot(aes(x = gross_nat_income, y = skilled_health_percentage)) + 
  geom_point(show.legend = TRUE) + 
  ggtitle("Percentage of Births Attended by Skilled Health Care vs Gross National Income") +
  labs(x = "Per Capita Gross National Income ($)", 
       y = "Percentage of Births Attended by Skilled Health Care") +
  scale_color_viridis(discrete = TRUE) +
  theme_bw()
```

